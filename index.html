<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="images/logoSito-removebg-preview.png">
    <title>SegmaSirra</title>
</head>
<body>
    <!-- Navigation Bar -->
    <nav>
        <div class="logo">SegmaSirra</div>
        <ul class="nav-links">
            <li><a href="#home">Home</a></li>
            <li><a href="#industries">Ligmas</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#contact" class="cta-button">Download</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="main">
        <section class="paragraph">
            <div class="canvas-container">
                <canvas id="canvas"></canvas>
            </div>
            <p>We transform ideas into brainrot that captivate and inspire audiences worldwide</p>
        </section>

        <section class="content-section">
            <h2>Our Balls</h2>
        </section>

        <section class="content-section">
            <h2>Let's Charlie Kirk</h2>
        </section>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <script>
        // Setup Three.js Scene
        const canvas = document.getElementById('canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        camera.position.z = 5;

        // Create Particles
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 5000;
        const positions = new Float32Array(particlesCount * 3);
        
        for(let i = 0; i < particlesCount * 3; i++) {
            positions[i] = (Math.random() - 0.5) * 10;
        }
        
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.02,
            color: 0x08bbbf,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending
        });
        
        const particles = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particles);

        // Create gradient sphere
        const sphereGeometry = new THREE.SphereGeometry(2, 64, 64);
        const sphereMaterial = new THREE.MeshBasicMaterial({
            color: 0x08bbbf,
            transparent: true,
            opacity: 0.1,
            wireframe: true
        });
        const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
        scene.add(sphere);

        // Animation variables
        let scrollProgress = 0;
        const clock = new THREE.Clock();

        // GSAP ScrollTrigger
        gsap.registerPlugin(ScrollTrigger);

        ScrollTrigger.create({
            trigger: '.paragraph',
            start: 'top top',
            end: 'bottom top',
            scrub: true,
            onUpdate: (self) => {
                scrollProgress = self.progress;
            }
        });
        // --- Logo fade-in e navbar links ---
    gsap.from(".logo", {
        opacity: 0,
        y: -20,
        duration: 1,
        ease: "power2.out"
    });

    gsap.from(".nav-links li", {
        opacity: 0,
        y: -10,
        stagger: 0.1,
        duration: 0.8,
        ease: "power2.out"
    });

    // --- Sezioni content-section che entrano con slide ---
    gsap.utils.toArray(".content-section h2").forEach(section => {
        gsap.from(section, {
            scrollTrigger: {
                trigger: section,
                start: "top 80%",
                end: "bottom 20%",
                toggleActions: "play none none none"
            },
            y: 50,
            opacity: 0,
            duration: 1,
            ease: "power2.out"
        });
    });

    // --- Paragrafo principale che ondeggia leggermente ---
    const paragraph = document.querySelector(".paragraph p");
    gsap.to(paragraph, {
        y: 10,
        repeat: -1,
        yoyo: true,
        duration: 2,
        ease: "sine.inOut"
    });

    // --- Mouse interaction per le particelle (Three.js) ---
    let mouseX = 0;
    let mouseY = 0;

    document.addEventListener("mousemove", (e) => {
        mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
        mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
    });

    // Nel tuo animate() di Three.js, aggiungi:
        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            
            const elapsedTime = clock.getElapsedTime();
            
            // Rotate particles based on time and scroll
            particles.rotation.y = elapsedTime * 0.05 + scrollProgress * Math.PI * 2;
            particles.rotation.x = scrollProgress * Math.PI;
            
            // Animate sphere
            sphere.scale.setScalar(1 + scrollProgress * 0.5);
            sphere.material.opacity = 0.1 + scrollProgress * 0.2;
            
            // Animate particles based on scroll
            const positions = particles.geometry.attributes.position.array;
            for(let i = 0; i < positions.length; i += 3) {
                const i3 = i + 1;
                positions[i3] = Math.sin(elapsedTime + positions[i]) * (0.5 + scrollProgress);
            }
            particles.geometry.attributes.position.needsUpdate = true;
            
            // Color transition based on scroll
            const color = new THREE.Color();
            color.setHSL(0.5 + scrollProgress * 0.2, 0.7, 0.5);
            particlesMaterial.color = color;
            sphereMaterial.color = color;
            particles.rotation.y = elapsedTime * 0.05 + scrollProgress * Math.PI * 2 + mouseX * 0.5;
            particles.rotation.x = scrollProgress * Math.PI + mouseY * 0.5;
            
            renderer.render(scene, camera);
        }

        animate();

        // Handle resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        });
    </script>
</body>
</html>
